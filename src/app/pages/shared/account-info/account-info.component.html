<div *ngIf="!visibleChangepass" class="container info">
    <h2 nz-typography>Thông tin tài khoản</h2>
    <div *ngIf="info" class="child-bar">
        <form nz-form>
            <nz-form-item>
                <nz-form-label [nzSpan]="6" nzFor="email">Email</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.email" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>


            <nz-form-item>
                <nz-form-label [nzSpan]="6">Chức vụ</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.role_name" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

        </form>

        <form *ngIf="currentRoleView == 'Phòng CTSV'" nz-form>
            <h3 style=" display: flex; justify-content: center;" nz-typography>Thông tin cán bộ phòng CTSV</h3>
            <nz-form-item>
                <nz-form-label [nzSpan]="6">Mã cán bộ</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.manager_id" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Họ và Tên</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.name" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Số điện thoại</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.phone" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Địa chỉ</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.address" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

        </form>

        <form *ngIf="currentRoleView == 'CVHT'" nz-form>
            <h3 style="display: flex; justify-content: center;" nz-typography>Thông tin giảng viên - CVHT
            </h3>
            <nz-form-item>
                <nz-form-label [nzSpan]="6">Mã GV</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.teacher_id" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Họ và Tên</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.name" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Khoa</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.unit" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Lớp quản lý</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <nz-tag *ngFor="let item of info.list_class" [nzColor]="'#2db7f5'">{{item.short_name}}</nz-tag>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Số điện thoại</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.phone" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Địa chỉ</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.address" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

        </form>

        <form *ngIf="currentRoleView == 'Ban cán sự' || currentRoleView == 'Sinh viên'" nz-form>
            <h3 *ngIf="currentRoleView == 'Ban cán sự'" style="display: flex; justify-content: center;" nz-typography>
                Thông tin sinh viên ban cán sự</h3>
            <h3 *ngIf="currentRoleView == 'Sinh viên'" style="display: flex; justify-content: center;" nz-typography>
                Thông tin sinh viên</h3>
            <nz-form-item>
                <nz-form-label [nzSpan]="6">Mã SV</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.student_id" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Họ và Tên</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.name" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Giới tính</nz-form-label>
                <nz-radio-group [(ngModel)]="info.gender" [ngModelOptions]="{standalone: true}">
                    <label *ngIf="info.gender == 'Nam'" nz-radio-button nzValue="Nam">Nam</label>
                    <label *ngIf="info.gender == 'Nữ'" nz-radio-button nzValue="Nữ">Nữ</label>
                </nz-radio-group>
            </nz-form-item>



            <nz-form-item>
                <nz-form-label [nzSpan]="6">Ngày Sinh</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.birthday  | date:'dd/MM/yyyy'" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Lớp</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.class_full +'('+info.class_short+')'" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>


            <nz-form-item>
                <nz-form-label [nzSpan]="6">Số điện thoại</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.phone" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-label [nzSpan]="6">Địa chỉ</nz-form-label>
                <nz-form-control [nzSpan]="14">
                    <input [value]="info.address" readonly="true" nz-input />
                </nz-form-control>
            </nz-form-item>

        </form>
        <div style="display: flex; justify-content: center; flex-wrap: wrap;" class="flex">
            <h4 nz-typography>Nếu có thông tin chưa chính xác, vui lòng
                liên hệ cán bộ phòng CTSV
                để chỉnh
                sửa!</h4>
        </div>
    </div>

</div>


<div *ngIf="visibleChangepass" class="container changepass">
    <h2 nz-typography>Đổi mật khẩu</h2>
    <div class="child-bar">
        <form nz-form [formGroup]="validateForm">

            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>Mật khẩu hiện tại</nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback nzErrorTip=" Vui lòng nhập đúng định dạng!">
                    <input nz-input type="password" formControlName="oldpass"
                        (ngModelChange)="validateConfirmPassword()" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>Mật khẩu mới</nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback nzErrorTip="Vui lòng nhập đúng định dạng!">
                    <input nz-input type="password" formControlName="password"
                        (ngModelChange)="validateConfirmPassword()" />
                </nz-form-control>
            </nz-form-item>
            <nz-form-item>
                <nz-form-label [nzSpan]="7" nzRequired>Xác nhận mật khẩu mới</nz-form-label>
                <nz-form-control [nzSpan]="12" nzHasFeedback [nzErrorTip]="passwordErrorTpl">
                    <input nz-input type="password" formControlName="confirm" />
                    <ng-template #passwordErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">Vui lòng nhập đúng định dạng!</ng-container>
                        <ng-container *ngIf="control.hasError('confirm')">Mật khẩu xác nhận không khớp!</ng-container>
                    </ng-template>
                </nz-form-control>
            </nz-form-item>

            <nz-form-item>
                <nz-form-control [nzOffset]="7" [nzSpan]="12">
                    <button (click)="changepass()" nz-button nzType="primary" *ngIf="validateForm.valid">Đổi mật
                        khẩu</button>
                </nz-form-control>
            </nz-form-item>
        </form>
    </div>

</div>

<app-loading></app-loading>